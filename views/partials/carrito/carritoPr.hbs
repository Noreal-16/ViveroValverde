<script>
    function cargarTabla(data) {
        console.log(data);
        var html = '';
        var total = 0;
        $.each(data, function (index, item) {
            html += '<tr><td>';
            html += '<div class="input-group">'
            html += '<a href="#" onClick="return item(' + "'" + item.external + "'" + ', 0)" class="btn btn-success">+</a>';
            html += '<input readonly type="text" value="' + item.cantidad + '" class="form-control col-md-2">';
            html += '<a href="#" onClick="return item(' + "'" + item.external + "'" + ', 1)" class="btn btn-danger">-</a>';
            html += '</div></td><td>' + item.nombre + '  [' + item.categoria + ']</td>';
            html += '<td>$' + item.precio + '</td>';
            html += '<td>$' + item.precio_total + '</td></tr>';
            total += item.precio_total
        });
        html += '<td></td><td></td><td>Total</td><td>$' + total.toFixed(2) + '</td>';

        $('#carritoDatos').html(html);
    }
    function item(external, tipo) {
        var url = 'http://localhost:8001/agregar' + external;
        url = (tipo == 1) ? 'http://localhost:8001/quitar' + external : url;
        $.ajax({
            url: url,
            type: 'GET',
            dataType: 'json',
            success: function (data, textStatus, jqXHR) {
                console.log(data);
                mostrarDatos(data);
                cargarTabla(data);
            }, error: function (jqXHR, textStatus, errorThrown) {
                console.log(jqXHR);
            }
        });
        return false;
    }
    function mostrar() {
        var url = 'http://localhost:8001/listarcarrito';
        $.ajax({
            url: url,
            type: 'GET',
            dataType: 'json',
            success: function (data, textStatus, jqXHR) {
                console.log(data);
                mostrarDatos(data);
                cargarTabla(data);
            }, error: function (jqXHR, textStatus, errorThrown) {
                console.log(jqXHR);
            }
        });
    }

    $(document).ready(function () {
        mostrar();
    });


</script>
<div class="container">
    <section class="gallery py-lg-4 py-md-3 py-sm-3 py-3" id="gallery">
        <div class="container py-lg-5 py-md-4 py-sm-4 py-3">
            <h3 class="title text-center mb-2">{{title}} </h3>
            <div class="title-w3ls-text text-center mb-lg-5 mb-md-4 mb-sm-4 mb-3">
            </div>
            <div class="section__content section__content--p30" id="">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-10">
                            <div class="card">
                                <div class="card-header">
                                    <i class="mr-2 fa fa-align-justify"></i>
                                    <strong class="card-title" v-if="headerText">Carrito</strong>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive m-b-40">
                                        <table class="table table-borderless table-data3" id="carrito">
                                            <thead>
                                                <tr>
                                                    <th>Cantidad</th>
                                                    <th>Descripci√≥n</th>
                                                    <th>Precio Unitario</th>
                                                    <th>Precio Total</th>
                                                </tr>
                                            </thead>
                                            <tbody id="carritoDatos">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>